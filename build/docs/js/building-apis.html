<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Launchpad Project (Developer Preview)</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<meta name="description" content="Launchpad is a Backend as a Service that makes it easy to create scalable apps in a matter of hours, not months">

	<meta property="og:title" content="Launchpad Project (Developer Preview)">
	<meta property="og:description" content="Launchpad is a Backend as a Service that makes it easy to create scalable apps in a matter of hours, not months">
	<meta property="og:url" content="http://liferay.io">
	<meta property="og:image" content="http://liferay.io/images/preview.jpg">
	<link rel="shortcut icon" href="/images/favicon.ico">

	<!-- Fonts -->
	<script src="https://use.typekit.net/kkw4zdf.js"></script>
	<script>try{Typekit.load({ async: true });}catch(e){}</script>
	<link rel="stylesheet" href="/vendor/fonts/icon-12.css">
	<link rel="stylesheet" href="/vendor/fonts/icon-16.css">
	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:700,400,300">

	<!-- Styles -->
	<link rel="stylesheet" href="/styles/all.css">
	
	<link rel="stylesheet" href="/vendor/styles/github-gist.css">
	<link rel="stylesheet" href="/styles/docs.css">

</head>
<body class="fade-out">

	
	<nav class="topbar topbar-inverse">
		<div class="topbar-logo">
			<a class="topbar-logo-link" href="/">
				<span class="icon-16-launchpad-logo"></span>
				<span class="topbar-logo-text">Launchpad <span class="topbar-logo-complementary">Project <span class="topbar-logo-label">Dev Preview</span></span></span>
			</a>
		</div>
		<ul class="topbar-list">
			<li class="topbar-item">
				<a class="topbar-link" href="/faq">FAQ</a>
			</li>
			<li class="topbar-item">
				<a class="topbar-link topbar-link-selected" href="/docs">Docs</a>
			</li>
			<li class="topbar-item">
				<a class="topbar-link" href="/dashboard/login/signin">Login</a>
			</li>
		</ul>
	</nav>

	<main class="docs">
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-sm-3 col-sm-offset-9 col-md-2 col-md-offset-10">
					<form action="/docs/js/search" method="GET">
						<div class="form-group">
							<div class="input-inner-addon input-inner-addon-right">
								<input name="q" class="form-control" type="text" placeholder="Search...">
								<span class="input-inner-icon-helper icon-16-magnifier"></span>
							</div>
						</div>
					</form>
				</div>
			</div>
			<div class="row">
				<nav class="docs-nav col-xs-12 col-sm-3">
					<p class="docs-nav-group">
						<a href="/docs/js/">Quickstart</a>
					</p>
					<ul class="docs-nav-list">
						<li class="docs-nav-item">
							<a href="/docs/js/#1-request-invitation" class="docs-nav-link">1. Request invitation</a>
						</li>
						<li class="docs-nav-item">
							<a href="/docs/js/#2-create-an-api" class="docs-nav-link">2. Create an API</a>
						</li>
						<li class="docs-nav-item">
							<a href="/docs/js/#3-connect-to-your-api" class="docs-nav-link">3. Connect to your API</a>
						</li>
						<li class="docs-nav-item">
							<a href="/docs/js/#4-read-write-data" class="docs-nav-link">4. Read & Write Data</a>
						</li>
					</ul>

					<p class="docs-nav-group">
						<a href="/docs/js/building-apis.html">Building APIs</a>
					</p>
					<ul class="docs-nav-list">
						<li class="docs-nav-item">
							<a href="/docs/js/building-apis.html#1-method" class="docs-nav-link">1. Method</a>
						</li>
						<li class="docs-nav-item">
							<a href="/docs/js/building-apis.html#2-endpoint" class="docs-nav-link">2. Endpoint</a>
						</li>
						<li class="docs-nav-item">
							<a href="/docs/js/building-apis.html#3-parameters" class="docs-nav-link">3. Parameters</a>
						</li>
						<li class="docs-nav-item">
							<a href="/docs/js/building-apis.html#4-body" class="docs-nav-link">4. Body</a>
						</li>
						<li class="docs-nav-item">
							<a href="/docs/js/building-apis.html#5-handler" class="docs-nav-link">5. Handler</a>
						</li>
						<li class="docs-nav-item">
							<a href="/docs/js/building-apis.html#6-authentication" class="docs-nav-link">6. Authentication</a>
						</li>
						<li class="docs-nav-item">
							<a href="/docs/js/building-apis.html#7-validator" class="docs-nav-link">7. Validator</a>
						</li>
					</ul>

					<p class="docs-nav-group">
						<a href="/docs/js/understanding-data.html">Understanding Data</a>
					</p>
					<ul class="docs-nav-list">
						<li class="docs-nav-item">
							<a href="/docs/js/understanding-data.html#1-write" class="docs-nav-link">1. Write</a>
						</li>
						<li class="docs-nav-item">
							<a href="/docs/js/understanding-data.html#2-read" class="docs-nav-link">2. Read</a>
						</li>
						<li class="docs-nav-item">
							<a href="/docs/js/understanding-data.html#3-search" class="docs-nav-link">3. Search</a>
						</li>
						<li class="docs-nav-item">
							<a href="/docs/js/understanding-data.html#4-watch" class="docs-nav-link">4. Watch</a>
						</li>
					</ul>
				</nav>

				<article class="docs-content col-xs-12 col-sm-6 col-sm-offset-1">
					<a href="https://github.com/launchpad-project/docs/edit/master/js/building-apis.md" class="docs-edit" target="_blank">
						Edit <span class="docs-edit-icon icon-16-pen"></span>
					</a>
					<h1 id="building-apis">Building APIs</h1>
<p>In Launchpad you can create apps, each composed of one or more services. A service exposes a REST interface that can be accessed via HTTP. We provide easy and powerful ways for you to describe and configure your APIs, so you can do more with less code.</p>
<h2 id="1-method">1. Method</h2>
<p>A <em>Method</em> works as a filter for requests that will be routed to this API definition. By default, all HTTP requests are mapped to an API, but you can change it to any subset you need. Launchpad currently supports the following HTTP methods:</p>
<ul>
<li><code>GET</code></li>
<li><code>POST</code></li>
<li><code>PUT</code></li>
<li><code>PATCH</code></li>
<li><code>DELETE</code></li>
</ul>
<h2 id="2-endpoint">2. Endpoint</h2>
<p>An <em>Endpoint</em> is the path used to access your API. There are many different combinations that you can use, which makes it really flexible and powerful.</p>
<p>1) By using the wildcard symbol <code>*</code>, you can match any request:</p>
<pre><code class="lang-text">/*
</code></pre>
<p>The example above will match paths like <code>/abc</code>, <code>/abc/def</code>, and so on.</p>
<p>2) An endpoint can also be mounted as a RESTful database. To enable data in your path, make sure the <em>Data</em> switcher is turned on. In order to properly represent a data path, we need to know which collection the path references.</p>
<pre><code class="lang-text">/collectionName/*
</code></pre>
<p>To access a resource from a collection, you can specify the resource ID on the request URL: <code>/collectionName/id</code>.</p>
<p>3) You can create URLs with parameters to match the request URL:</p>
<pre><code class="lang-text">/sum/:first/:second
</code></pre>
<p>4) The endpoint configuration also supports regular expressions:</p>
<pre><code class="lang-text">/sum/:first(\d+)/:second(\d+)
</code></pre>
<p>The example above will match any request with two numbers after <code>sum</code>. For instance it will match <code>/sum/123/456</code>, but not requests like <code>/sum/text</code> or <code>/sum/123/word</code>. The regular expression patterns allow you to filter the URLs, and name the extracted URL segment for future reference. </p>
<blockquote>
<p>Notice the endpoint from two different APIs may overlap, or even be identical. In this case, your service will match the first API, in the order they were created, and if this one doesn&#39;t handle the request, or explicitly calls <code>next</code> inside the handler, then it will match and execute the second one.</p>
</blockquote>
<h2 id="3-parameters">3. Parameters</h2>
<p><em>Parameters</em> can be used to describe any parameter a request may receive. They are loaded from:</p>
<ul>
<li>URL Query</li>
<li>Form URL Encoded</li>
<li>Multipart Form</li>
<li>JSON Body</li>
</ul>
<p>The supported <em>Type</em> values are the JSON types: string, number, boolean, array and object.</p>
<p>The <em>Required</em> flag indicates the parameter must be present in the request.</p>
<p>The <em>Value</em> field defines a value that will be injected in the received request (note that this is not a <em>default</em> value. This value will always be injected, and will be accumulated to existing values in the request). If a request fails to comply to any of these specifications, a <code>400 Bad Request</code> will be returned with errors for all parameters.</p>
<p>The <em>Validator</em> is a JavaScript expression that will be executed if a value is passed for this parameter. You can read more about it in the <a href="#7-validator">Validator section</a>.</p>
<h2 id="4-body">4. Body</h2>
<p>The body is a descriptor, similar to a parameter descriptor, with the exception of the <em>Value</em> field, which can be used to describe and validate the request body. It can be useful when the body is not a form URL encoded, multipart form, or a JSON object, making it impossible to validate it with the <code>parameters</code> field. One example is to validate body data in a API, using the following validator:</p>
<pre><code>$body.startsWith(&quot;foo&quot;)
</code></pre><p>You can read more about it in the <a href="#7-validator">Validator section</a>.</p>
<h2 id="5-handler">5. Handler</h2>
<p>A <em>Handler</em> is a very important part of understanding how to extend Launchpad.</p>
<p>This feature allows you to receive a request and process it. Currently, you can only write a handler using JavaScript, and they can be synchronous or asynchronous.</p>
<pre><code class="lang-js">function handler() {
   return &#39;Hello!&#39;; // Synchronous
}
</code></pre>
<pre><code class="lang-js">function handler(request, response) {
   response.end(&#39;Hello!&#39;); // Asynchronous
}
</code></pre>
<p>Imagine the handlers as route interceptors. When you have a path with a handler, it stops there. You can force it to continue the route matching by calling <code>request.next()</code>:</p>
<pre><code class="lang-js">function handler(request) {
  request.next(); // Call the next matching route
}
</code></pre>
<h2 id="6-authentication">6. Authentication</h2>
<p>The <em>Validator</em> field enables you to describe any JavaScript expression to authorize the request. You can read more about it in the <a href="#7-validator">Validator section</a>.</p>
<h2 id="7-validator">7. Validator</h2>
<p>The <em>Validator</em> script will be executed in an environment where several request and server data will be available. In this environment, there are several global variables available to you that can be used to validate the request parameter, body, or even to authorize the request. </p>
<p>The global variables are:</p>
<ul>
<li><code>$auth</code>: the authenticated user of this request. If the request was not authenticated, it will be <code>null</code>.</li>
<li><code>$config</code>: the raw JSON data stored in the service&#39;s <code>config.json</code> file.</li>
<li><code>$session</code>: all stored session data. If the request had no session cookie, it will be an empty map for the new session created for this request.</li>
<li><code>$params</code>: the request params as they were loaded from url query and request body. All query and form parameters will be strings here.</li>
<li><code>$values</code>: the parsed request params, as they are used for parameter validation. All query and form parameters will be parsed to JSON values.</li>
<li><code>$body</code>: the parsed request body, according to the request <code>Content-Type</code>.</li>
<li><code>$data</code>: the data view for this request, if a data path is mounted in the API path, and the request path represents a key to access any data resource (collection, document or inner field from a document). It will be <code>null</code> otherwise.</li>
</ul>
<p>Some common validators are:</p>
<p>1) Authenticated users only</p>
<pre><code class="lang-js">$auth !== null
</code></pre>
<p>2) Mixed with dynamic values</p>
<pre><code class="lang-js">$auth.id === $params.id
</code></pre>
<p>3) Validate new data value agains old one</p>
<pre><code class="lang-js">$body.timestamp &gt; $data.timestamp
</code></pre>
<blockquote>
<p>Note that the validator must return <code>true</code> for the request to be accepted.</p>
</blockquote>
<h2 id="7-what-s-next-">7. What&#39;s Next?</h2>
<ul>
<li>Read the <a href="http://liferay.io/docs/js/understanding-data.html">&quot;Understanding Data&quot;</a> guide</li>
</ul>

				</article>
			</div>
		</div>
	</main>


	<script src="/scripts/all.js"></script>
	
	<script src="/vendor/scripts/highlight.pack.min.js"></script>
	<script src="/scripts/docs.js"></script>


	<!-- Intercom -->
	<script>
	window.intercomSettings = { app_id: 'ytqx30hx' };
	(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/ytqx30hx';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()
	</script>

	<!-- Analytics -->
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-37033501-2', 'auto');
	ga('send', 'pageview');
	</script>

	<!-- Inspectlet -->
	<script id="inspectletjs">
	window.__insp = window.__insp || [];
	__insp.push(['wid', 1029478452]);
	(function() {
		function ldinsp(){var insp = document.createElement('script'); insp.type = 'text/javascript'; insp.async = true; insp.id = "inspsync"; insp.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://cdn.inspectlet.com/inspectlet.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(insp, x); };
		document.readyState != "complete" ? (window.attachEvent ? window.attachEvent('onload', ldinsp) : window.addEventListener('load', ldinsp, false)) : ldinsp();
	})();
	</script>
</body>
</html>